# Architecture of Anatta

本来Webは、サーバの境界を超えてドキュメント間に自由にリンクを張るものであり、
一方ブラウザからはそれらを各人が自由なルートで利用できる、
実質的に単一のドキュメントネットワークを構成している。

Anattaでは、プログラムに対して、
Webのような、単一のネットワークのうえで
提供者と利用者の双方で自由につながる関係を可能とするための
根幹のアーキテクチャを選択したものである。

Anattaにおける「プログラム」は、
URIを通じて非同期に他の「プログラム」へアクセスできる
「実行環境」であるEngineの中で稼働する。
この「プログラム」では、あるURIでアクセスした「プログラム」から受け取った
「ドキュメント」の中にあるURIリンクから、別のプログラムを
次々と呼び出すことができる。
このEngineは、「プログラム」やWebやストレージといった機能に対して
自由なURIの割当を行う単位である。

そして「プログラム」の非同期実行の"起点"となるイベントととして、
イベント発生源をSubscribe元として制約する必要がない、
Anattaではユニバーサルな「イベント」のネットワークhashnetを提唱する。
ここでの「プログラム」は、"hashnetに対して"「イベント」をPUTし、
"hashnetから"「イベント」をGETするアーキテクチャとなるものである。
「イベント」を使う側としては、その処理する「イベント」の内容によって、
非同期実行が駆動されるものであるため、
「プログラム」は、「イベント」の内容を示す「Context」に対して
シェアしあう関係となる。

このhashnetでは、インターネット上で、それぞれに「イベント」キューを
もったピアの分散的な連携によって実現する。
ただし、ピア単体の「イベント」キューとしてまずhashnetは成立し、
その上で、ピア間で連携するための各種の情報の入った「イベント」を
発行し解釈するシステムとして、
分散連携を実現するものである。
同様の手法で、パッケージ配布システムなどでも、
hashnet上の分散システムとして自己拡張していくことができる。

「イベント」は非対称鍵により署名検証され、
公開鍵を「イベント」発行者のアイデンティティとすると、
「イベント」の内容は発行者によるものと信頼する、ものとなる。
その「イベント」の内容にあるURIもその発行者による保証されたものであり、
「イベント」の内容とURIの先にある情報とを突き合わせによって、
URIの先への信頼を機械的に確認できる。
個々の人を起点としたURIへの信頼の仕組みを提供するものであり、
hashnetにおけるピアの連携では、この信頼の輪を広げていくことで
成立させていく。


